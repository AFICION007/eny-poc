import { Card, Modal } from 'antd'
import React, { useState } from 'react'
import styles from './styles.module.css'

import { Viewer, Worker } from "@react-pdf-viewer/core";
import { defaultLayoutPlugin } from "@react-pdf-viewer/default-layout";
import "@react-pdf-viewer/core/lib/styles/index.css";
import "@react-pdf-viewer/default-layout/lib/styles/index.css";


const CircleLogo = ({ className }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none" className={className}>
        <circle cx="25" cy="25" r="25" fill="currentColor" />
    </svg>
)

const RightArrow = ({ className }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none" className={className}>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M14.9621 6.83709C14.596 7.2032 14.596 7.7968 14.9621 8.16291L20.8617 14.0625H7.5C6.98223 14.0625 6.5625 14.4822 6.5625 15C6.5625 15.5178 6.98223 15.9375 7.5 15.9375H20.8617L14.9621 21.8371C14.596 22.2032 14.596 22.7968 14.9621 23.1629C15.3282 23.529 15.9218 23.529 16.2879 23.1629L23.7879 15.6629C24.154 15.2968 24.154 14.7032 23.7879 14.3371L16.2879 6.83709C15.9218 6.47097 15.3282 6.47097 14.9621 6.83709Z" fill="currentColor" />
    </svg>
)

const FileLogo = ({ className }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none" className={className}>
        <path d="M34.9273 6.65866C34.9273 6.23671 34.5853 5.89453 34.1632 5.89453H12.5483C12.1262 5.89453 11.7842 6.23671 11.7842 6.65866C11.7842 7.08062 12.1262 7.4228 12.5483 7.4228H34.1634C34.5853 7.4228 34.9273 7.08062 34.9273 6.65866Z" fill="currentColor" />
        <path d="M10.075 7.4228C10.4971 7.4228 10.8391 7.08062 10.8391 6.65866C10.8391 6.23671 10.4971 5.89453 10.075 5.89453H8.77292C8.35082 5.89453 8.00879 6.23671 8.00879 6.65866C8.00879 7.08062 8.35082 7.4228 8.77292 7.4228H10.075Z" fill="currentColor" />
        <path d="M6.29896 7.4228C6.72107 7.4228 7.0631 7.08062 7.0631 6.65866C7.0631 6.23671 6.72107 5.89453 6.29896 5.89453H5.2573C4.83519 5.89453 4.49316 6.23671 4.49316 6.65866C4.49316 7.08062 4.83519 7.4228 5.2573 7.4228H6.29896Z" fill="currentColor" />
        <path d="M17.8643 22.1365C18.2864 22.1365 18.6284 21.7943 18.6284 21.3724V11.3462C18.6284 10.9242 18.2864 10.582 17.8643 10.582H5.64792C5.22581 10.582 4.88379 10.9242 4.88379 11.3462V30.4871C4.88379 30.909 5.22581 31.2512 5.64792 31.2512H17.8643C18.2864 31.2512 18.6284 30.909 18.6284 30.4871V24.888C18.6284 24.466 18.2864 24.1238 17.8643 24.1238C17.4422 24.1238 17.1001 24.466 17.1001 24.888V29.723H6.41206V12.1103H17.1001V21.3724C17.1001 21.7945 17.4422 22.1365 17.8643 22.1365Z" fill="currentColor" />
        <path d="M22.4449 44.1405H34.6613C35.0834 44.1405 35.4254 43.7983 35.4254 43.3763V36.0102C35.4254 35.5883 35.0834 35.2461 34.6613 35.2461H22.4448C22.0227 35.2461 21.6807 35.5883 21.6807 36.0102V43.3763C21.6808 43.7983 22.0228 44.1405 22.4449 44.1405ZM23.2091 36.7744H33.8972V42.6122H23.2089L23.2091 36.7744Z" fill="currentColor" />
        <path d="M17.8643 33.8086H5.64792C5.22581 33.8086 4.88379 34.1508 4.88379 34.5727C4.88379 34.9947 5.22581 35.3369 5.64792 35.3369H17.8643C18.2864 35.3369 18.6284 34.9947 18.6284 34.5727C18.6284 34.1508 18.2864 33.8086 17.8643 33.8086Z" fill="currentColor" />
        <path d="M17.864 38.043H15.5434C15.1213 38.043 14.7793 38.3851 14.7793 38.8071C14.7793 39.2291 15.1213 39.5712 15.5434 39.5712H17.864C18.2861 39.5712 18.6281 39.2291 18.6281 38.8071C18.6281 38.3851 18.2861 38.043 17.864 38.043Z" fill="currentColor" />
        <path d="M5.64792 39.5712H12.4188C12.8409 39.5712 13.1829 39.2291 13.1829 38.8071C13.1829 38.3851 12.8409 38.043 12.4188 38.043H5.64792C5.22581 38.043 4.88379 38.3851 4.88379 38.8071C4.88379 39.2291 5.22597 39.5712 5.64792 39.5712Z" fill="currentColor" />
        <path d="M5.64792 43.8017H17.8643C18.2864 43.8017 18.6284 43.4595 18.6284 43.0376C18.6284 42.6156 18.2864 42.2734 17.8643 42.2734H5.64792C5.22581 42.2734 4.88379 42.6156 4.88379 43.0376C4.88379 43.4595 5.22597 43.8017 5.64792 43.8017Z" fill="currentColor" />
        <path d="M34.6615 10.582H28.9555C28.5334 10.582 28.1914 10.9242 28.1914 11.3462C28.1914 11.7681 28.5334 12.1103 28.9555 12.1103H34.6615C35.0836 12.1103 35.4256 11.7681 35.4256 11.3462C35.4256 10.9242 35.0836 10.582 34.6615 10.582Z" fill="currentColor" />
        <path d="M22.4448 10.582C22.0227 10.582 21.6807 10.9242 21.6807 11.3462C21.6807 11.7681 22.0227 12.1103 22.4448 12.1103H25.1795C25.6016 12.1103 25.9436 11.7681 25.9436 11.3462C25.9436 10.9242 25.6016 10.582 25.1795 10.582H22.4448Z" fill="currentColor" />
        <path d="M34.6613 14.8125H22.4448C22.0227 14.8125 21.6807 15.1547 21.6807 15.5766C21.6807 15.9986 22.0227 16.3408 22.4448 16.3408H34.6613C35.0834 16.3408 35.4254 15.9986 35.4254 15.5766C35.4254 15.1547 35.0834 14.8125 34.6613 14.8125Z" fill="currentColor" />
        <path d="M34.6613 19.043H22.4448C22.0227 19.043 21.6807 19.3851 21.6807 19.8071C21.6807 20.2291 22.0227 20.5712 22.4448 20.5712H34.6613C35.0834 20.5712 35.4254 20.2291 35.4254 19.8071C35.4254 19.3851 35.0834 19.043 34.6613 19.043Z" fill="currentColor" />
        <path d="M34.6613 23.0273H31.2993C30.8772 23.0273 30.5352 23.3695 30.5352 23.7915C30.5352 24.2134 30.8772 24.5556 31.2993 24.5556H34.6613C35.0834 24.5556 35.4255 24.2134 35.4255 23.7915C35.4255 23.3695 35.0834 23.0273 34.6613 23.0273Z" fill="currentColor" />
        <path d="M22.4448 24.5556H28.1741C28.5962 24.5556 28.9383 24.2134 28.9383 23.7915C28.9383 23.3695 28.5962 23.0273 28.1741 23.0273H22.4448C22.0227 23.0273 21.6807 23.3695 21.6807 23.7915C21.6807 24.2134 22.0227 24.5556 22.4448 24.5556Z" fill="currentColor" />
        <path d="M34.6613 27.2617H22.4448C22.0227 27.2617 21.6807 27.6039 21.6807 28.0259C21.6807 28.4478 22.0227 28.79 22.4448 28.79H34.6613C35.0834 28.79 35.4254 28.4478 35.4254 28.0259C35.4254 27.6039 35.0834 27.2617 34.6613 27.2617Z" fill="currentColor" />
        <path d="M34.6613 31.4922H22.4448C22.0227 31.4922 21.6807 31.8344 21.6807 32.2563C21.6807 32.6783 22.0227 33.0205 22.4448 33.0205H34.6613C35.0834 33.0205 35.4254 32.6783 35.4254 32.2563C35.4254 31.8344 35.0834 31.4922 34.6613 31.4922Z" fill="currentColor" />
        <path d="M41.3852 35.329H44.7473C45.1694 35.329 45.5114 34.9869 45.5114 34.5649C45.5114 34.143 45.1694 33.8008 44.7473 33.8008H41.3852C40.9631 33.8008 40.6211 34.143 40.6211 34.5649C40.6211 34.9869 40.9631 35.329 41.3852 35.329Z" fill="currentColor" />
        <path d="M1.22116 37.7998C1.64312 37.7998 1.9853 37.4577 1.9853 37.0357V1.52827H38.4785L38.4802 10.9039C38.4802 11.3251 38.8217 11.6666 39.2431 11.6666H39.2438C39.6652 11.6666 40.0067 11.3251 40.0067 10.9037V0.764133C40.0067 0.342179 39.6646 0 39.2426 0H1.22116C0.79921 0 0.457031 0.342179 0.457031 0.764133V37.0357C0.457031 37.4578 0.799057 37.7998 1.22116 37.7998Z" fill="currentColor" />
        <path d="M48.7797 29.46H40.0061V15.1355C40.0061 14.7371 39.7148 14.3812 39.318 14.3434C38.8631 14.3 38.4803 14.6567 38.4803 15.1028L38.4858 44.4698C38.4858 46.042 39.145 47.4628 40.2021 48.4705L5.98594 48.4702C3.77942 48.4702 1.98432 46.676 1.98432 44.4706V40.3967C1.98432 39.9748 1.64214 39.6326 1.22019 39.6326C0.798234 39.6326 0.456055 39.9748 0.456055 40.3967V44.4706C0.456055 47.5187 2.93658 49.9985 5.98594 49.9985L43.8194 49.9988C43.8371 49.9988 43.8549 49.9982 43.8724 49.997C43.9638 49.9993 44.0558 49.9994 44.1483 49.9971C47.1658 49.927 49.5437 47.3882 49.5437 44.3697V30.2238C49.5438 29.802 49.2017 29.46 48.7797 29.46ZM48.0156 44.4698C48.0156 46.6759 46.2209 48.4705 44.0149 48.4705C41.8088 48.4705 40.014 46.6757 40.0139 44.4559L40.0059 43.7925H44.7468C45.1689 43.7925 45.5109 43.4503 45.5109 43.0284C45.5109 42.6064 45.1689 42.2643 44.7468 42.2643H40.0059V39.5607H44.7468C45.1689 39.5607 45.5109 39.2186 45.5109 38.7966C45.5109 38.3747 45.1689 38.0325 44.7468 38.0325H40.0059V30.9882H48.0154V44.4698H48.0156Z" fill="currentColor" />
    </svg>
)
const ReportCard = ({ report }) => {

    const [isModalOpen, setIsModalOpen] = useState(false);
    const onClick = (url) => {if(url) setIsModalOpen(true)}
    const defaultPluginInstance = defaultLayoutPlugin();
    return (
        <>
            <Card
                className={styles.card}
                hoverable
                onClick={onClick}
            >
                <h1 className={styles.title}>{report.title}</h1>
                <div className={styles.logo_div}>
                    <FileLogo className={styles.logo} />
                </div>

                <div className={styles.logo_wrapper}>
                    <CircleLogo className={styles.circle_logo} />
                    <div className={styles.arrow_div}><RightArrow className={styles.right_arrow} /></div>
                </div>

            </Card>
            <Modal
                title={report.title}
                open={isModalOpen}
                onCancel={() => setIsModalOpen(false)}
                footer={null}
                className={styles.modal}
            >
                <Worker workerUrl="https://unpkg.com/pdfjs-dist@3.4.120/build/pdf.worker.min.js">
                    <div className={styles.pdf_viewer_container}>
                        <Viewer fileUrl={report.url} plugins={[defaultPluginInstance]} />
                    </div>
                </Worker>
            </Modal>
        </>
    )
}

export default ReportCard